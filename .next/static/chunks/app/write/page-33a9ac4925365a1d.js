(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{1644:(e,t,r)=>{"use strict";r.d(t,{w:()=>o});let o={owner:{id:"owner-soomin",name:"Suri",email:"yzsumin@naver.com",bio:"개발자이자 블로거입니다.",avatar:"/images/profile.jpg",social:{github:"https://github.com/yourusername",linkedin:"https://linkedin.com/in/yourusername",twitter:"https://twitter.com/yourusername"}},metadata:{title:"SuriBlog",description:"개발과 기술에 대한 이야기",url:"https://yourdomain.com",image:"/images/og-image.jpg"},auth:{adminPassword:r(49509).env.BLOG_ADMIN_PASSWORD||"admin123!",sessionTimeout:864e5}}},39363:(e,t,r)=>{Promise.resolve().then(r.bind(r,58437))},58437:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ev});var o=r(95155),i=r(12115),n=r(35695),a=r(56454),l=r(23823),s=r(16301),c=r(13161),d=r(83951),u=r(79323),x=r(1644),p=r(56278),h=r(54492),g=r(700),m=r(99927),b=r(54581),f=r(9665),A=r(73731),j=r(71977),y=r(68534),v=r(92549);function k(e){let{open:t,onClose:r,onSuccess:n}=e,[a,l]=(0,i.useState)(""),[s,c]=(0,i.useState)(""),[d,x]=(0,i.useState)(!1),k=async e=>{e.preventDefault(),x(!0),c("");try{await u.u.login(a)?(n(),r(),l("")):c("비밀번호가 올바르지 않습니다.")}catch(e){c("로그인 중 오류가 발생했습니다.")}finally{x(!1)}},S=()=>{l(""),c(""),r()};return(0,o.jsxs)(p.A,{open:t,onClose:S,maxWidth:"sm",fullWidth:!0,children:[(0,o.jsxs)(h.A,{sx:{textAlign:"center",pb:1},children:[(0,o.jsx)(v.A,{sx:{fontSize:48,color:"primary.main",mb:1}}),(0,o.jsx)(g.A,{variant:"h5",component:"div",children:"관리자 로그인"}),(0,o.jsx)(g.A,{variant:"body2",color:"text.secondary",children:"블로그 관리를 위해 로그인해주세요"})]}),(0,o.jsxs)("form",{onSubmit:k,children:[(0,o.jsx)(m.A,{children:(0,o.jsxs)(b.A,{sx:{pt:1},children:[s&&(0,o.jsx)(f.A,{severity:"error",sx:{mb:2},children:s}),(0,o.jsx)(A.A,{fullWidth:!0,type:"password",label:"관리자 비밀번호",value:a,onChange:e=>l(e.target.value),placeholder:"비밀번호를 입력하세요",autoFocus:!0,required:!0,disabled:d})]})}),(0,o.jsxs)(j.A,{sx:{px:3,pb:3},children:[(0,o.jsx)(y.A,{onClick:S,disabled:d,children:"취소"}),(0,o.jsx)(y.A,{type:"submit",variant:"contained",disabled:d||!a.trim(),sx:{minWidth:100},children:d?"로그인 중...":"로그인"})]})]})]})}var S=r(16324),C=r(67217),w=r(14962),I=r(18407),z=r(71803),T=r(41101),R=r(3127),D=r(29267),W=r(18096),E=r(83729),P=r(74964),O=r(27088),F=r(17348),M=r(16675),H=r(76380),U=r(71302),B=r(37857),N=r(21942),L=r(39550),J=r(77402),q=r(45129),_=r(19505),K=r(36894),$=r(28890),G=r(58674),V=r(34744),Z=r(87254),X=r(21690),Y=r(58005),Q=r(80841),ee=r(2864),et=r(32355),er=r(6295),eo=r(29982),ei=r(27513),en=r(99561),ea=r(29393),el=r(41387),es=r(73895),ec=r(35330),ed=r(48584),eu=r(69979),ex=r(11130),ep=r(20904),eh=r(85089),eg=r(51935),em=r(16142),eb=r(41350),ef=r(69817),eA=r(94615),ej=r(6821);function ey(){let e=(0,S.A)(),t=(0,n.useRouter)(),r=(0,i.useRef)(null),ey=(0,n.useSearchParams)().get("edit"),[ev,ek]=(0,i.useState)(!1),[eS,eC]=(0,i.useState)(!1),[ew,eI]=(0,i.useState)(null),[ez,eT]=(0,i.useState)(!1),[eR,eD]=(0,i.useState)({title:"",summary:"",content:"",category:"",status:"draft"}),[eW,eE]=(0,i.useState)([]),[eP,eO]=(0,i.useState)(0),[eF,eM]=(0,i.useState)(!1),[eH,eU]=(0,i.useState)(""),[eB,eN]=(0,i.useState)("idle"),[eL,eJ]=(0,i.useState)(!1),[eq,e_]=(0,i.useState)("idle"),eK=(0,i.useRef)(null),[e$,eG]=(0,i.useState)([]),[eV,eZ]=(0,i.useState)(-1),[eX,eY]=(0,i.useState)([]),[eQ,e0]=(0,i.useState)(!1),[e5,e1]=(0,i.useState)(!1),[e2,e3]=(0,i.useState)("idle"),[e6,e4]=(0,i.useState)(null),e8=(0,i.useRef)(null),[e7,e9]=(0,i.useState)(!1),[te,tt]=(0,i.useState)(!1),[tr,to]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{if(!ey){eT(!1),to(null);return}try{let e=await fetch("/api/posts/".concat(ey));if(!e.ok)throw Error("Post not found");let t=await e.json();eT(!0);let r=t.isPublished?"published":"draft";eD({title:t.title,summary:t.excerpt,content:t.content,category:t.category,status:r}),eE(t.tags||[]),to(r)}catch(e){console.error("Error loading post:",e),alert("포스트를 불러오는데 실패했습니다.")}finally{}})()},[ey]),(0,i.useEffect)(()=>{let e=u.u.isAuthenticated();ek(e),e&&eI(u.u.getUser())},[t]),(0,i.useEffect)(()=>()=>{eK.current&&clearTimeout(eK.current)},[]);let ti=(0,i.useCallback)(async()=>{if(ev){e1(!0);try{let e=await fetch("/api/posts?isPublished=false&limit=10&sortField=updatedAt&sortOrder=desc",{headers:u.u.getAuthHeaders()});if(e.ok){let t=await e.json();eY(t.posts||[])}}catch(e){console.error("Error loading drafts:",e)}finally{e1(!1)}}},[ev]);(0,i.useEffect)(()=>{ev&&ti()},[ev,ti]);let tn=(0,i.useCallback)(e=>{let t=e.isPublished?"published":"draft";eD({title:e.title,summary:e.excerpt||"",content:e.content,category:e.category,status:t}),eE(e.tags||[]),e0(!1),to(t);let r=new URL(window.location.href);r.searchParams.set("edit",e.id),window.history.pushState({},"",r.toString())},[]),ta=(0,i.useCallback)(async e=>{if(confirm("이 임시저장 글을 삭제하시겠습니까?"))try{console.log("[DRAFT] Attempting to delete draft: ".concat(e));let t=await u.u.authenticatedFetch("/api/posts/".concat(e),{method:"DELETE"});if(t.ok)console.log("[DRAFT] Draft deleted successfully: ".concat(e)),ti(),alert("임시저장 글이 삭제되었습니다.");else{let e=await t.json().catch(()=>({}));if(console.error("[DRAFT] Delete failed:",{status:t.status,error:e}),401===t.status){u.u.logout(),ek(!1),eI(null),eC(!0),alert("세션이 만료되었습니다. 다시 로그인해주세요.");return}let r=e.details||e.error||"알 수 없는 오류";alert("삭제에 실패했습니다: ".concat(r))}}catch(e){console.error("Error deleting draft:",e),alert("삭제 중 오류가 발생했습니다: ".concat(e instanceof Error?e.message:"알 수 없는 오류"))}},[ti]),tl=(0,i.useCallback)(async()=>{if(ev&&(eR.title.trim()||eR.content.trim())){e3("saving");try{let e,t="published"===tr,r=eR.summary.trim()||(eR.content?eR.content.substring(0,200).replace(/\n/g," ").trim()+(eR.content.length>200?"...":""):"자동 생성된 요약"),o={title:eR.title||"제목 없음",content:eR.content,excerpt:r,category:eR.category,tags:eW,isPublished:t,isFeatured:!1};if(ey)e=await fetch("/api/posts/".concat(ey),{method:"PUT",headers:{...u.u.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(o)});else if((e=await fetch("/api/posts",{method:"POST",headers:{...u.u.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(o)})).ok){let r=await e.json(),o=new URL(window.location.href);o.searchParams.set("edit",r.id),window.history.replaceState({},"",o.toString()),to(t?"published":"draft")}e.ok?(e3("saved"),e4(new Date),ti()):e3("error")}catch(e){console.error("Auto-save error:",e),e3("error")}}},[ev,eR,eW,ey,ti,tr]);(0,i.useEffect)(()=>{if(ev)return e8.current&&clearTimeout(e8.current),(eR.title.trim()||eR.content.trim())&&(e8.current=setTimeout(()=>{tl()},3e4)),()=>{e8.current&&clearTimeout(e8.current)}},[eR,eW,ev,tl]),(0,i.useEffect)(()=>()=>{e8.current&&clearTimeout(e8.current)},[]);let ts="blog_draft_backup",tc=(0,i.useCallback)(()=>{let e={formData:eR,tags:eW,timestamp:Date.now(),editId:ey,originalPostStatus:tr};try{localStorage.setItem(ts,JSON.stringify(e))}catch(e){console.error("Failed to save to localStorage:",e)}},[eR,eW,ey,tr]),td=(0,i.useCallback)(()=>{try{let e=localStorage.getItem(ts);if(e){let t=JSON.parse(e);if(Date.now()-t.timestamp<864e5)return t;localStorage.removeItem(ts)}}catch(e){console.error("Failed to load from localStorage:",e),localStorage.removeItem(ts)}return null},[]),tu=(0,i.useCallback)(()=>{localStorage.removeItem(ts)},[]);(0,i.useEffect)(()=>{let e=td();if(e&&!ey){let t=eR.title.trim()||eR.content.trim();(e.formData.title.trim()||e.formData.content.trim())&&!t&&tt(!0)}},[]),(0,i.useEffect)(()=>{tc(),e9(!0)},[eR,eW,tc]),(0,i.useEffect)(()=>{"saved"===e2&&e9(!1)},[e2]),(0,i.useEffect)(()=>{let e=e=>{if(e7)return e.preventDefault(),e.returnValue="저장되지 않은 변경사항이 있습니다. 정말 페이지를 떠나시겠습니까?",e.returnValue};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[e7]);let tx=(0,i.useCallback)(()=>{let e=td();if(e&&(eD(e.formData),eE(e.tags),to(e.originalPostStatus||null),tt(!1),e.editId)){let t=new URL(window.location.href);t.searchParams.set("edit",e.editId),window.history.replaceState({},"",t.toString())}},[td]),tp=(0,i.useCallback)(()=>{tt(!1),tu()},[tu]),th=(0,i.useCallback)(async(e,t)=>{if(e&&!(e.trim().length<50)){eJ(!0),e_("generating");try{let r=await fetch("/api/ai/summarize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e,title:t})});if(!r.ok)throw Error("요약 생성 실패");let o=await r.json();eD(e=>({...e,summary:o.summary})),e_("success"),setTimeout(()=>e_("idle"),2e3)}catch(e){console.error("AI 요약 생성 오류:",e),e_("error"),setTimeout(()=>e_("idle"),3e3)}finally{eJ(!1)}}},[]),tg=(0,i.useCallback)((e,t)=>{eK.current&&clearTimeout(eK.current),eK.current=setTimeout(()=>{th(e,t)},2e3)},[th]),tm=e=>t=>{let r=t.target.value;"content"===e&&r!==eR.content&&tf(eR.content),eD(t=>({...t,[e]:r})),"saved"===eB&&eN("idle"),"content"===e&&r.trim().length>=50&&tg(r,eR.title)},tb=()=>{if(eR.content.trim().length<50)return void alert("요약을 생성하려면 내용을 최소 50자 이상 입력해주세요.");th(eR.content,eR.title)},tf=e=>{if(e===e$[eV])return;let t=e$.slice(0,eV+1);t.push(e),t.length>50&&t.shift(),eG(t),eZ(t.length-1)},tA=()=>{eV>0&&(eZ(eV-1),eD(e=>({...e,content:e$[eV-1]})))},tj=()=>{eV<e$.length-1&&(eZ(eV+1),eD(e=>({...e,content:e$[eV+1]})))},ty=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!r.current)return;let n=r.current,a=n.selectionStart,l=n.selectionEnd,s=n.value.substring(a,l),c=s||o,d=e;i&&a>0&&"\n"!==n.value[a-1]&&(d="\n"+d);let u=d+c+t,x=n.value.substring(0,a)+u+n.value.substring(l);tf(eR.content),eD(e=>({...e,content:x})),setTimeout(()=>{n.focus();let e=a+d.length+(s?s.length:o.length);n.setSelectionRange(e,e)},0)},tv=e=>{ty("#".repeat(e)+" ","","제목",!0)},tk=()=>ty("**","**","굵은 텍스트"),tS=()=>ty("*","*","기울임 텍스트"),tC=()=>ty("<u>","</u>","밑줄 텍스트"),tw=()=>ty("~~","~~","취소선 텍스트"),tI=()=>ty("`","`","인라인 코드"),tz=()=>ty("```\n","\n```","코드 블록",!0),tT=()=>ty("[","](url)","링크 텍스트"),tR=e=>()=>eU(e),tD=()=>eU(""),tW=(0,i.useCallback)(e=>{if(!e.trim())return"post-".concat(Date.now());let t=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s가-힣-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").trim();return(!t||t.length<3)&&(t="post-".concat(Date.now())),t.length>100&&(t=t.substring(0,100).replace(/-$/,"")),t},[]),tE=async()=>{if(console.log("[WRITE] handleSave started"),console.log("[WRITE] Auth state:",u.u.debugAuthState()),!eR.title.trim())return void alert("제목을 입력해주세요.");if(!eR.category)return void alert("카테고리를 선택해주세요.");if(!eR.summary.trim())return void alert("요약을 입력해주세요.");if(0===eW.length)return void alert("최소 1개의 태그를 입력해주세요.");eN("saving");try{var e;let t="published"===eR.status,r=eR.summary.trim()||eR.content.substring(0,200).replace(/\n/g," ").trim()+(eR.content.length>200?"...":""),o={title:eR.title,content:eR.content,excerpt:r,slug:tW(eR.title),tags:eW,category:eR.category,authorId:x.w.owner.id,featured:!1,isPublished:t},i=ez?"/api/posts/".concat(ey):"/api/posts",n=ez?"PUT":"POST";console.log("[WRITE] Sending ".concat(n," request to ").concat(i)),console.log("[WRITE] Post data:",{title:o.title,category:o.category,isPublished:o.isPublished,tagsCount:(null==(e=o.tags)?void 0:e.length)||0});let a=await u.u.authenticatedFetch(i,{method:n,body:JSON.stringify(o)});if(console.log("[WRITE] Response status: ".concat(a.status)),!a.ok){let e=await a.json().catch(()=>({}));if(console.error("[WRITE] Request failed:",{status:a.status,statusText:a.statusText,error:e}),401===a.status){console.log("[WRITE] Authentication failed, logging out user"),console.log("[WRITE] Auth debug state before logout:",u.u.debugAuthState()),console.log("[WRITE] Current form data:",{title:eR.title,status:eR.status,isEditing:ez}),u.u.logout(),ek(!1),eI(null),eC(!0),alert("인증이 만료되었습니다. 다시 로그인해주세요.");return}let t=e.details||e.error||a.statusText;throw Error("Failed to ".concat(ez?"update":"save"," post: ").concat(t))}let l=await a.json();console.log("Post saved:",l),eN("saved"),setTimeout(()=>eN("idle"),3e3)}catch(e){console.error("Error saving post:",e),eN("error"),setTimeout(()=>eN("idle"),3e3)}},tP=async()=>{if(console.log("[WRITE] handlePublish called"),console.log("[WRITE] formData:",eR),console.log("[WRITE] tags:",eW),!eR.title.trim())return void alert("제목을 입력해주세요.");if(!eR.category)return void alert("카테고리를 선택해주세요.");if(!eR.summary.trim())return void alert("요약을 입력해주세요.");if(0===eW.length)return void alert("최소 1개의 태그를 입력해주세요.");try{var e;let r=eR.summary.trim()||eR.content.substring(0,200).replace(/\n/g," ").trim()+(eR.content.length>200?"...":""),o={title:eR.title,content:eR.content,excerpt:r,slug:tW(eR.title),tags:eW,category:eR.category,authorId:x.w.owner.id,featured:!1,isPublished:!0},i=ez?"/api/posts/".concat(ey):"/api/posts",n=ez?"PUT":"POST";console.log("[WRITE] Publishing: Sending ".concat(n," request to ").concat(i)),console.log("[WRITE] Publish data:",{title:o.title,category:o.category,isPublished:o.isPublished,tagsCount:(null==(e=o.tags)?void 0:e.length)||0});let a=await u.u.authenticatedFetch(i,{method:n,body:JSON.stringify(o)});if(console.log("[WRITE] Publish response status: ".concat(a.status)),!a.ok){let e=await a.json().catch(()=>({}));if(console.error("[WRITE] Publish failed:",{status:a.status,statusText:a.statusText,error:e}),401===a.status){console.log("[WRITE] Authentication failed during publish, logging out user"),console.log("[WRITE] Auth debug state:",u.u.debugAuthState()),u.u.logout(),ek(!1),eI(null),eC(!0),alert("세션이 만료되었습니다. 다시 로그인해주세요.");return}let t=e.details||e.error||a.statusText;throw Error("Failed to ".concat(ez?"update":"publish"," post: ").concat(t))}let l=await a.json();console.log("Post published:",l),alert("포스트가 ".concat(ez?"수정":"발행","되었습니다!")),ez?setTimeout(()=>{t.push("/posts/".concat(l.slug||ey))},1e3):(eD({title:"",summary:"",content:"",category:"",status:"draft"}),eE([]),setTimeout(()=>{t.push("/")},1e3)),eN("idle")}catch(e){console.error("[WRITE] Error publishing post:",e),alert("포스트 발행 중 오류가 발생했습니다: ".concat(e instanceof Error?e.message:"알 수 없는 오류"))}},tO=async e=>{if(e){eM(!0);try{let t=new FormData;t.append("image",e);let o=await fetch("/api/upload",{method:"POST",body:t});if(!o.ok)throw Error("Upload failed");let i=await o.json(),n="![".concat(e.name,"](").concat(i.url,")\n\n");if(r.current){let e=r.current,t=e.selectionStart,o=e.value.substring(0,t)+n+e.value.substring(t);eD(e=>({...e,content:o})),setTimeout(()=>{e.focus(),e.setSelectionRange(t+n.length,t+n.length)},0)}}catch(e){console.error("Error uploading image:",e),alert("이미지 업로드에 실패했습니다.")}finally{eM(!1)}}},tF=d.qr,tM=eR.content.split(" ").length,tH=eR.content.length,tU=Math.ceil(tM/200);return ev?(0,o.jsx)(ef.A,{children:(0,o.jsxs)(b.A,{sx:{minHeight:"100vh",bgcolor:"background.default"},children:[(0,o.jsx)(eA.A,{}),(0,o.jsxs)(C.A,{maxWidth:!1,sx:{maxWidth:"1400px",mx:"auto",px:{xs:2,md:4},py:4,"& @keyframes spin":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}},children:[(0,o.jsxs)(b.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,p:3,bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper",borderRadius:2,boxShadow:"none",border:"1px solid ".concat(e.palette.divider)},children:[(0,o.jsxs)(b.A,{children:[(0,o.jsx)(g.A,{variant:"h4",component:"h1",sx:{fontWeight:600,mb:1,fontSize:"1.5rem"},children:ez?"✏️ 글 수정":"✍️ 새 글 작성"}),(0,o.jsxs)(g.A,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:["안녕하세요, ",(null==ew?void 0:ew.name)||"관리자","님! ",ez?"글을 수정해보세요":"새로운 이야기를 시작해보세요"]})]}),(0,o.jsxs)(b.A,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,o.jsx)(w.A,{in:"idle"!==eB||"idle"!==e2,children:(0,o.jsxs)(b.A,{sx:{display:"flex",alignItems:"center",gap:1},children:["saving"===eB&&(0,o.jsx)(f.A,{severity:"info",sx:{py:.5},children:"저장 중..."}),"saved"===eB&&(0,o.jsx)(f.A,{severity:"success",sx:{py:.5},children:"저장 완료!"}),"error"===eB&&(0,o.jsx)(f.A,{severity:"error",sx:{py:.5},children:"저장 실패"}),"saving"===e2&&(0,o.jsxs)(f.A,{severity:"info",sx:{py:.5,fontSize:"0.75rem"},children:[(0,o.jsx)(B.A,{sx:{fontSize:16,mr:.5,animation:"spin 1s linear infinite"}}),"자동 저장 중..."]}),"saved"===e2&&e6&&(0,o.jsxs)(f.A,{severity:"success",sx:{py:.5,fontSize:"0.75rem"},children:["자동 저장됨 (",e6.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),")"]}),"error"===e2&&(0,o.jsx)(f.A,{severity:"warning",sx:{py:.5,fontSize:"0.75rem"},children:"자동 저장 실패"})]})}),(0,o.jsx)(y.A,{variant:"outlined",onClick:()=>{u.u.logout(),ek(!1),eI(null),eC(!0)},startIcon:(0,o.jsx)(N.A,{}),size:"small",sx:{borderRadius:2},children:"로그아웃"})]})]}),ev&&(0,o.jsx)(b.A,{sx:{mb:4},children:(0,o.jsxs)(I.A,{sx:{p:3,borderRadius:2,border:"1px solid ".concat(e.palette.divider),bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,o.jsxs)(b.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,o.jsxs)(g.A,{variant:"h6",sx:{fontWeight:600,display:"flex",alignItems:"center"},children:[(0,o.jsx)(L.A,{sx:{mr:1,color:"primary.main"}}),"임시저장 글 (",eX.length,")"]}),(0,o.jsx)(y.A,{variant:"outlined",size:"small",startIcon:eQ?(0,o.jsx)(J.A,{}):(0,o.jsx)(L.A,{}),onClick:()=>e0(!eQ),sx:{borderRadius:1},children:eQ?"목록 숨기기":"목록 보기"})]}),eQ&&(0,o.jsx)(b.A,{sx:{mt:2},children:e5?(0,o.jsx)(b.A,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,o.jsx)(g.A,{variant:"body2",color:"text.secondary",children:"로딩 중..."})}):0===eX.length?(0,o.jsxs)(b.A,{sx:{p:3,textAlign:"center",bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.05)":"grey.50",borderRadius:1,border:"1px dashed ".concat(e.palette.divider)},children:[(0,o.jsx)(L.A,{sx:{fontSize:48,color:"text.disabled",mb:1}}),(0,o.jsx)(g.A,{variant:"body2",color:"text.secondary",children:"저장된 임시글이 없습니다."})]}):(0,o.jsx)(z.A,{spacing:2,children:eX.map(t=>{var r;return(0,o.jsx)(b.A,{sx:{p:2,border:"1px solid ".concat(e.palette.divider),borderRadius:1,bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.05)":"background.paper",cursor:"pointer",transition:"all 0.2s ease","&:hover":{borderColor:"primary.main",bgcolor:"dark"===e.palette.mode?"rgba(33, 150, 243, 0.1)":"primary.50"}},onClick:()=>tn(t),children:(0,o.jsxs)(b.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,o.jsxs)(b.A,{sx:{flex:1,minWidth:0},children:[(0,o.jsx)(g.A,{variant:"h6",sx:{fontWeight:600,mb:.5,display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.title||"제목 없음"}),(0,o.jsx)(g.A,{variant:"body2",color:"text.secondary",sx:{mb:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.excerpt||(null==(r=t.content)?void 0:r.substring(0,100))+"..."}),(0,o.jsxs)(b.A,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[(0,o.jsx)(T.A,{label:t.category||"카테고리 없음",size:"small",color:"primary",variant:"outlined"}),(0,o.jsxs)(b.A,{sx:{display:"flex",alignItems:"center",color:"text.secondary"},children:[(0,o.jsx)(q.A,{sx:{fontSize:16,mr:.5}}),(0,o.jsx)(g.A,{variant:"caption",children:new Date(t.updatedAt).toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),(0,o.jsx)(R.A,{size:"small",onClick:e=>{e.stopPropagation(),ta(t.id)},sx:{ml:1,color:"error.main","&:hover":{bgcolor:"error.50"}},children:(0,o.jsx)(_.A,{sx:{fontSize:18}})})]})},t.id)})})})]})}),(0,o.jsxs)(b.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",lg:"2fr 1fr"},gap:4},children:[(0,o.jsx)(b.A,{children:(0,o.jsxs)(I.A,{sx:{height:"100%",borderRadius:2,border:"1px solid ".concat(e.palette.divider),overflow:"hidden",boxShadow:"0 2px 12px rgba(0,0,0,0.05)"},children:[(0,o.jsxs)(b.A,{sx:{p:3,borderBottom:"1px solid ".concat(e.palette.divider),bgcolor:"dark"===e.palette.mode?"rgba(0,0,0,0.05)":"background.paper"},children:[(0,o.jsxs)(b.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,o.jsxs)(g.A,{variant:"h6",sx:{fontWeight:600,display:"flex",alignItems:"center"},children:[(0,o.jsx)(K.A,{sx:{mr:1,color:"primary.main"}}),"에디터"]}),(0,o.jsx)(b.A,{sx:{display:"flex",gap:1},children:(0,o.jsxs)(D.A,{value:eP,onChange:(e,t)=>eO(t),children:[(0,o.jsx)(W.A,{label:"편집",icon:(0,o.jsx)($.A,{}),iconPosition:"start"}),(0,o.jsx)(W.A,{label:"미리보기",icon:(0,o.jsx)(G.A,{}),iconPosition:"start"})]})})]}),0===eP&&(0,o.jsxs)(b.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5,p:2,bgcolor:"dark"===e.palette.mode?"rgba(0,0,0,0.05)":"grey.50",borderRadius:1.5,border:"1px solid ".concat(e.palette.divider)},children:[(0,o.jsx)(E.A,{title:"실행 취소 (Ctrl+Z)",children:(0,o.jsx)(R.A,{size:"small",onClick:tA,disabled:eV<=0,sx:{p:.75},children:(0,o.jsx)(V.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"다시 실행 (Ctrl+Y)",children:(0,o.jsx)(R.A,{size:"small",onClick:tj,disabled:eV>=e$.length-1,sx:{p:.75},children:(0,o.jsx)(Z.A,{sx:{fontSize:16}})})}),(0,o.jsx)(P.A,{orientation:"vertical",flexItem:!0}),(0,o.jsx)(E.A,{title:"제목 1 (H1)",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>tv(1),sx:{p:.75},children:(0,o.jsx)(g.A,{sx:{fontWeight:"bold",fontSize:"12px"},children:"H1"})})}),(0,o.jsx)(E.A,{title:"제목 2 (H2)",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>tv(2),sx:{p:.75},children:(0,o.jsx)(g.A,{sx:{fontWeight:"bold",fontSize:"11px"},children:"H2"})})}),(0,o.jsx)(E.A,{title:"제목 3 (H3)",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>tv(3),sx:{p:.75},children:(0,o.jsx)(g.A,{sx:{fontWeight:"bold",fontSize:"10px"},children:"H3"})})}),(0,o.jsx)(P.A,{orientation:"vertical",flexItem:!0}),(0,o.jsx)(E.A,{title:"굵게 (Ctrl+B)",children:(0,o.jsx)(R.A,{size:"small",onClick:tk,sx:{p:.75},children:(0,o.jsx)(X.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"기울임 (Ctrl+I)",children:(0,o.jsx)(R.A,{size:"small",onClick:tS,sx:{p:.75},children:(0,o.jsx)(Y.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"밑줄 (Ctrl+U)",children:(0,o.jsx)(R.A,{size:"small",onClick:tC,sx:{p:.75},children:(0,o.jsx)(Q.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"취소선 (Ctrl+Shift+X)",children:(0,o.jsx)(R.A,{size:"small",onClick:tw,sx:{p:.75},children:(0,o.jsx)(ee.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"하이라이트",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>ty("<mark>","</mark>","하이라이트 텍스트"),sx:{p:.75},children:(0,o.jsx)(et.A,{sx:{fontSize:16}})})}),(0,o.jsx)(P.A,{orientation:"vertical",flexItem:!0}),(0,o.jsx)(E.A,{title:"인라인 코드 (Ctrl+`)",children:(0,o.jsx)(R.A,{size:"small",onClick:tI,sx:{p:.75},children:(0,o.jsx)(er.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"코드 블록 (Ctrl+Shift+K)",children:(0,o.jsx)(R.A,{size:"small",onClick:tz,sx:{p:.75},children:(0,o.jsx)(g.A,{sx:{fontWeight:"bold",fontSize:"10px"},children:"{}"})})}),(0,o.jsx)(P.A,{orientation:"vertical",flexItem:!0}),(0,o.jsx)(E.A,{title:"링크 (Ctrl+K)",children:(0,o.jsx)(R.A,{size:"small",onClick:tT,sx:{p:.75},children:(0,o.jsx)(eo.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"이미지",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>ty("![","](image-url)","이미지 설명"),sx:{p:.75},children:(0,o.jsx)(ei.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"이미지 업로드",children:(0,o.jsxs)(R.A,{size:"small",component:"label",disabled:eF,sx:{p:.75},children:[(0,o.jsx)(g.A,{sx:{fontWeight:"bold",fontSize:"10px"},children:"\uD83D\uDCF7"}),(0,o.jsx)("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];r&&tO(r)}})]})}),(0,o.jsx)(P.A,{orientation:"vertical",flexItem:!0}),(0,o.jsx)(E.A,{title:"순서없는 목록",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>ty("- ","","목록 항목",!0),sx:{p:.75},children:(0,o.jsx)(en.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"순서있는 목록",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>ty("1. ","","번호 목록 항목",!0),sx:{p:.75},children:(0,o.jsx)(ea.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"체크박스 목록",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>ty("- [ ] ","","체크박스 항목",!0),sx:{p:.75},children:(0,o.jsx)(el.A,{sx:{fontSize:16}})})}),(0,o.jsx)(P.A,{orientation:"vertical",flexItem:!0}),(0,o.jsx)(E.A,{title:"인용문",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>ty("> ","","인용문",!0),sx:{p:.75},children:(0,o.jsx)(es.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"표",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>{ty("| 헤더1 | 헤더2 | 헤더3 |\n|-------|-------|-------|\n| 내용1 | 내용2 | 내용3 |\n| 내용4 | 내용5 | 내용6 |","","",!0)},sx:{p:.75},children:(0,o.jsx)(ec.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"구분선",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>ty("\n---\n","","",!1),sx:{p:.75},children:(0,o.jsx)(ed.A,{sx:{fontSize:16}})})}),(0,o.jsx)(P.A,{orientation:"vertical",flexItem:!0}),(0,o.jsx)(E.A,{title:"인라인 수식",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>ty("$","$","수식"),sx:{p:.75},children:(0,o.jsx)(eu.A,{sx:{fontSize:16}})})}),(0,o.jsx)(E.A,{title:"수식 블록",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>ty("$$\n","\n$$","수식 블록",!0),sx:{p:.75},children:(0,o.jsx)(ex.A,{sx:{fontSize:16}})})}),(0,o.jsx)(P.A,{orientation:"vertical",flexItem:!0}),(0,o.jsx)(E.A,{title:"CodePen 임베드",children:(0,o.jsx)(R.A,{size:"small",onClick:()=>{let e=prompt("CodePen URL을 입력해주세요 (예: https://codepen.io/username/pen/abc123):");if(!e)return;let t=e.match(/codepen\.io\/([^\/]+)\/pen\/([^\/\?]+)/);if(!t)return void alert("올바른 CodePen URL을 입력해주세요.");let[,r,o]=t,i="https://codepen.io/".concat(r,"/embed/").concat(o,"?height=400&theme-id=dark&default-tab=html,result");ty('<iframe height="400" style="width: 100%;" scrolling="no" title="CodePen - '.concat(o,'" src="').concat(i,'" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">\n  See the Pen <a href="').concat(e,'">').concat(o,"</a> by ").concat(r,' on <a href="https://codepen.io">CodePen</a>.\n</iframe>'),"","",!0)},sx:{p:.75},children:(0,o.jsx)(g.A,{sx:{fontWeight:"bold",fontSize:"10px"},children:"CP"})})})]})]}),(0,o.jsxs)(b.A,{sx:{p:3,display:"flex",flexDirection:"column",gap:3},children:[(0,o.jsx)(A.A,{fullWidth:!0,label:"title"===eH?"":"제목",value:eR.title,onChange:tm("title"),onFocus:tR("title"),onBlur:tD,placeholder:"title"===eH||eR.title?"포스트 제목을 입력하세요":"",variant:"outlined",required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5,fontSize:"1.2rem",fontWeight:500,bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper",color:"text.primary","& input":{color:"inherit"},"&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}}}}),(0,o.jsxs)(b.A,{sx:{position:"relative"},children:[(0,o.jsx)(A.A,{fullWidth:!0,label:"summary"===eH?"":"요약",value:eR.summary,onChange:tm("summary"),onFocus:tR("summary"),onBlur:tD,placeholder:"summary"===eH||eR.summary?"포스트의 간단한 요약을 입력하세요 (150자 이내 권장)":"",variant:"outlined",multiline:!0,rows:3,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5,bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper",color:"text.primary","& textarea":{color:"inherit"},"&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}}}}),(0,o.jsxs)(b.A,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:1,alignItems:"center"},children:["generating"===eq&&(0,o.jsx)(T.A,{icon:(0,o.jsx)(ep.A,{}),label:"AI 생성 중...",size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.75rem"}}),"success"===eq&&(0,o.jsx)(T.A,{icon:(0,o.jsx)(ep.A,{}),label:"AI 생성 완료",size:"small",color:"success",variant:"outlined",sx:{fontSize:"0.75rem"}}),"error"===eq&&(0,o.jsx)(T.A,{icon:(0,o.jsx)(ep.A,{}),label:"생성 실패",size:"small",color:"error",variant:"outlined",sx:{fontSize:"0.75rem"}}),(0,o.jsx)(E.A,{title:"AI로 요약 생성",children:(0,o.jsx)(R.A,{size:"small",onClick:tb,disabled:eL||eR.content.trim().length<50,sx:{bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper",border:"1px solid",borderColor:"divider","&:hover":{bgcolor:"dark"===e.palette.mode?"rgba(33, 150, 243, 0.1)":"primary.50",borderColor:"primary.main"}},children:eL?(0,o.jsx)(B.A,{sx:{animation:"spin 1s linear infinite"}}):(0,o.jsx)(ep.A,{})})})]}),(0,o.jsxs)(b.A,{sx:{mt:1,display:"flex",alignItems:"center",gap:1},children:[(0,o.jsx)(ep.A,{sx:{fontSize:16,color:"primary.main"}}),(0,o.jsx)(g.A,{variant:"caption",color:"text.secondary",children:eR.content.trim().length<50?"내용을 50자 이상 입력하면 AI가 자동으로 요약을 생성합니다":eL?"AI가 내용을 분석하여 요약을 생성 중입니다...":"내용이 변경되면 2초 후 자동으로 요약이 업데이트됩니다"})]})]}),0===eP&&(0,o.jsx)(A.A,{fullWidth:!0,label:"content"===eH?"":"내용",value:eR.content,onChange:tm("content"),onFocus:tR("content"),onBlur:tD,onKeyDown:e=>{let t=navigator.platform.toUpperCase().indexOf("MAC")>=0?e.metaKey:e.ctrlKey;if(t&&!e.shiftKey)switch(e.key.toLowerCase()){case"b":e.preventDefault(),tk();break;case"i":e.preventDefault(),tS();break;case"u":e.preventDefault(),tC();break;case"k":e.preventDefault(),tT();break;case"z":e.preventDefault(),tA();break;case"y":e.preventDefault(),tj();break;case"`":e.preventDefault(),tI()}if(t&&e.shiftKey)switch(e.key.toLowerCase()){case"z":e.preventDefault(),tj();break;case"k":e.preventDefault(),tz();break;case"x":e.preventDefault(),tw()}},placeholder:"content"===eH||eR.content?'마크다운 형식으로 내용을 작성하세요...\n\n예시:\n# 제목\n## 소제목\n\n본문 내용을 여기에 작성하세요.\n\n**굵은 글씨** *기울임* `코드`\n\n> 인용문\n\n- 목록 항목\n\n```javascript\nfunction example() {\n  console.log("코드 블록");\n}\n```':"",variant:"outlined",multiline:!0,rows:20,required:!0,inputRef:r,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5,fontFamily:'"JetBrains Mono", "Fira Code", Monaco, Menlo, "Ubuntu Mono", monospace',fontSize:"14px",lineHeight:1.6,bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper",color:"text.primary","& textarea":{resize:"vertical",color:"inherit"},"&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}}}}),1===eP&&(0,o.jsx)(b.A,{sx:{minHeight:"500px",p:3,border:"1px solid ".concat(e.palette.divider),borderRadius:1.5,bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper","& h1, & h2, & h3, & h4, & h5, & h6":{fontWeight:600,mb:2,mt:3,color:e.palette.text.primary},"& p":{mb:2,lineHeight:1.7,color:e.palette.text.primary},"& code":{backgroundColor:"dark"===e.palette.mode?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)",padding:"2px 6px",borderRadius:"4px",fontFamily:'"JetBrains Mono", "Fira Code", Monaco, Menlo, "Ubuntu Mono", monospace',fontSize:"0.9em",color:e.palette.text.primary},"& pre":{backgroundColor:"dark"===e.palette.mode?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.04)",padding:"16px",borderRadius:"8px",overflow:"auto",fontFamily:'"JetBrains Mono", "Fira Code", Monaco, Menlo, "Ubuntu Mono", monospace',fontSize:"0.9em",border:"1px solid ".concat(e.palette.divider),"& code":{backgroundColor:"transparent",padding:0,borderRadius:0}},"& blockquote":{borderLeft:"4px solid ".concat(e.palette.primary.main),paddingLeft:"16px",margin:"16px 0",fontStyle:"italic",color:e.palette.text.secondary,backgroundColor:"dark"===e.palette.mode?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.02)",padding:"12px 16px",borderRadius:"4px"},"& ul, & ol":{paddingLeft:"24px",marginBottom:"16px"},"& li":{marginBottom:"8px",lineHeight:1.6},"& table":{width:"100%",borderCollapse:"collapse",marginBottom:"16px",border:"1px solid ".concat(e.palette.divider)},"& th, & td":{padding:"12px",textAlign:"left",borderBottom:"1px solid ".concat(e.palette.divider),borderRight:"1px solid ".concat(e.palette.divider)},"& th":{backgroundColor:"dark"===e.palette.mode?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.04)",fontWeight:600},"& img":{maxWidth:"100%",height:"auto",borderRadius:"8px",marginBottom:"16px"},"& a":{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}},"& hr":{border:"none",borderTop:"2px solid ".concat(e.palette.divider),margin:"24px 0"},"& mark":{backgroundColor:"dark"===e.palette.mode?"rgba(255, 193, 7, 0.3)":e.palette.warning.light,padding:"2px 4px",borderRadius:"2px"},'& input[type="checkbox"]':{marginRight:"8px"}},children:eR.content?(0,o.jsx)(a.oz,{remarkPlugins:[l.A,s.A],rehypePlugins:[c.A],components:{input:e=>{let{type:t,checked:r,...i}=e;return"checkbox"===t?(0,o.jsx)("input",{type:"checkbox",checked:r,readOnly:!0,style:{marginRight:"8px"},...i}):(0,o.jsx)("input",{type:t,...i})},p:e=>{let{children:t,...r}=e;return(0,o.jsx)("p",{style:{marginBottom:"1.5em",lineHeight:"1.8",whiteSpace:"pre-wrap"},...r,children:t})},br:()=>(0,o.jsx)("br",{style:{display:"block",marginBottom:"1em"}}),code:e=>{let{className:t,children:r,...i}=e;return(0,o.jsx)("code",{className:t,...i,children:r})},pre:e=>{let{className:t,children:r,...i}=e;return(0,o.jsx)("pre",{className:t,...i,children:r})}},children:eR.content}):(0,o.jsx)(g.A,{color:"text.secondary",sx:{fontStyle:"italic"},children:"내용을 입력하면 여기에 미리보기가 표시됩니다..."})})]})]})}),(0,o.jsx)(b.A,{children:(0,o.jsxs)(b.A,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,o.jsxs)(I.A,{sx:{p:3,borderRadius:2,border:"1px solid ".concat(e.palette.divider),bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,o.jsxs)(g.A,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center"},children:[(0,o.jsx)(eh.A,{sx:{mr:1,color:"primary.main"}}),"발행 관리"]}),(0,o.jsxs)(z.A,{spacing:2,children:[(0,o.jsx)(y.A,{fullWidth:!0,variant:"outlined",size:"large",startIcon:(0,o.jsx)(eg.A,{}),onClick:tE,disabled:"saving"===eB,sx:{borderRadius:1.5,py:1.5,textTransform:"none",fontSize:"1rem","&:hover":{borderColor:"primary.main",bgcolor:"dark"===e.palette.mode?"rgba(33, 150, 243, 0.1)":"primary.50"}},children:"saving"===eB?"저장 중...":"임시 저장"}),(0,o.jsx)(y.A,{fullWidth:!0,variant:"contained",size:"large",startIcon:(0,o.jsx)(eh.A,{}),onClick:tP,sx:{borderRadius:1.5,py:1.5,textTransform:"none",fontSize:"1rem",fontWeight:600,boxShadow:"0 2px 8px rgba(0,0,0,0.15)","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.2)"}},children:ez?"수정 완료":"발행하기"})]})]}),(0,o.jsxs)(I.A,{sx:{p:3,borderRadius:2,border:"1px solid ".concat(e.palette.divider),bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,o.jsx)(g.A,{variant:"h6",sx:{fontWeight:600,mb:3},children:"\uD83D\uDCC2 분류 설정"}),(0,o.jsxs)(z.A,{spacing:3,children:[(0,o.jsxs)(O.A,{fullWidth:!0,required:!0,children:[(0,o.jsx)(F.A,{children:"카테고리 *"}),(0,o.jsx)(M.A,{value:eR.category,onChange:tm("category"),label:"카테고리 *",required:!0,sx:{borderRadius:1.5,color:"text.primary","& .MuiOutlinedInput-root":{"&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}}},children:tF.map(e=>(0,o.jsx)(H.A,{value:e,children:e},e))})]}),(0,o.jsxs)(O.A,{fullWidth:!0,children:[(0,o.jsx)(F.A,{children:"상태"}),(0,o.jsxs)(M.A,{value:eR.status,onChange:tm("status"),label:"상태",sx:{borderRadius:1.5,color:"text.primary","& .MuiOutlinedInput-root":{"&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}}},children:[(0,o.jsx)(H.A,{value:"draft",children:"\uD83D\uDCDD 초안"}),(0,o.jsx)(H.A,{value:"published",children:"\uD83C\uDF0D 발행됨"}),(0,o.jsx)(H.A,{value:"private",children:"\uD83D\uDD12 비공개"})]})]})]})]}),(0,o.jsxs)(I.A,{sx:{p:3,borderRadius:2,border:"1px solid ".concat(e.palette.divider),bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,o.jsxs)(g.A,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center"},children:[(0,o.jsx)(em.A,{sx:{mr:1,color:"primary.main"}}),"태그"]}),(0,o.jsx)(U.A,{multiple:!0,options:["React","JavaScript","TypeScript","Next.js","Vue.js","Node.js","Python","CSS","HTML","Web Development","Frontend","Backend","Tutorial","Guide","Tips"],value:eW,onChange:(e,t)=>eE(t),freeSolo:!0,renderTags:(t,r)=>t.map((t,o)=>{let{key:n,...a}=r({index:o});return(0,i.createElement)(T.A,{variant:"outlined",label:t,...a,key:n,sx:{borderRadius:1.5,"&:hover":{borderColor:"primary.main",bgcolor:"dark"===e.palette.mode?"rgba(33, 150, 243, 0.1)":"primary.50"}}})}),renderInput:e=>(0,o.jsx)(A.A,{...e,placeholder:0===eW.length?"태그를 추가하세요 (Enter로 구분)":"",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:1.5,color:"text.primary","& input":{color:"inherit"},"&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}}}})}),(0,o.jsx)(g.A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"\uD83D\uDCA1 태그는 검색과 분류에 도움이 됩니다"})]}),(0,o.jsxs)(I.A,{sx:{p:3,borderRadius:2,border:"1px solid ".concat(e.palette.divider),bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,o.jsxs)(g.A,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center"},children:[(0,o.jsx)(eb.A,{sx:{mr:1,color:"primary.main"}}),"작성 통계"]}),(0,o.jsxs)(b.A,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[(0,o.jsxs)(b.A,{sx:{textAlign:"center",p:2,bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.08)":"grey.50",borderRadius:1.5,border:"1px solid ".concat(e.palette.divider)},children:[(0,o.jsx)(g.A,{variant:"h4",sx:{fontWeight:700,color:"secondary.main"},children:tM.toLocaleString()}),(0,o.jsx)(g.A,{variant:"caption",color:"text.secondary",children:"단어"})]}),(0,o.jsxs)(b.A,{sx:{textAlign:"center",p:2,bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.08)":"grey.50",borderRadius:1.5,border:"1px solid ".concat(e.palette.divider)},children:[(0,o.jsx)(g.A,{variant:"h4",sx:{fontWeight:700,color:"secondary.main"},children:tU}),(0,o.jsx)(g.A,{variant:"caption",color:"text.secondary",children:"분 읽기"})]})]}),(0,o.jsx)(b.A,{sx:{mt:2,p:2,bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.08)":"grey.50",borderRadius:1.5},children:(0,o.jsxs)(b.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsx)(g.A,{variant:"body2",color:"text.secondary",children:"문자 수"}),(0,o.jsx)(g.A,{variant:"h4",sx:{fontWeight:700,color:"secondary.main"},children:tH.toLocaleString()})]})})]}),(0,o.jsxs)(I.A,{sx:{p:3,borderRadius:2,border:"1px solid ".concat(e.palette.divider),bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,o.jsxs)(g.A,{variant:"h6",sx:{fontWeight:600,mb:3,display:"flex",alignItems:"center"},children:[(0,o.jsx)(ep.A,{sx:{mr:1,color:"primary.main"}}),"AI 어시스턴트"]}),(0,o.jsxs)(z.A,{spacing:2,children:[(0,o.jsxs)(b.A,{sx:{p:2,bgcolor:"generating"===eq?"dark"===e.palette.mode?"rgba(33, 150, 243, 0.1)":"primary.50":"dark"===e.palette.mode?"rgba(255,255,255,0.08)":"grey.50",borderRadius:1.5,border:"1px solid ".concat("generating"===eq?e.palette.primary.main:e.palette.divider)},children:[(0,o.jsxs)(g.A,{variant:"body2",fontWeight:"600",sx:{mb:1,display:"flex",alignItems:"center"},children:["generating"===eq&&(0,o.jsx)(B.A,{sx:{fontSize:16,mr:1,animation:"spin 1s linear infinite"}}),"자동 요약 상태"]}),(0,o.jsxs)(g.A,{variant:"caption",color:"text.secondary",children:["idle"===eq&&"대기 중","generating"===eq&&"AI가 요약을 생성하고 있습니다...","success"===eq&&"✅ 요약이 성공적으로 생성되었습니다","error"===eq&&"❌ 요약 생성에 실패했습니다"]})]}),(0,o.jsx)(y.A,{fullWidth:!0,variant:"outlined",startIcon:(0,o.jsx)(ep.A,{}),onClick:tb,disabled:eL||eR.content.trim().length<50,sx:{borderRadius:1.5,textTransform:"none","&:hover":{borderColor:"primary.main",bgcolor:"dark"===e.palette.mode?"rgba(33, 150, 243, 0.1)":"primary.50"}},children:eL?"생성 중...":"수동으로 요약 생성"}),(0,o.jsxs)(b.A,{sx:{p:2,bgcolor:"dark"===e.palette.mode?"rgba(3, 169, 244, 0.05)":"info.50",borderRadius:1.5,border:"1px solid ".concat(e.palette.info.main)},children:[(0,o.jsx)(g.A,{variant:"body2",color:"info.main",sx:{fontWeight:600,mb:1},children:"\uD83D\uDCA1 AI 요약 팁"}),(0,o.jsxs)(g.A,{variant:"caption",color:"text.secondary",children:["• 내용을 50자 이상 작성하면 자동 생성됩니다",(0,o.jsx)("br",{}),"• 2초 지연 후 자동으로 업데이트됩니다",(0,o.jsx)("br",{}),"• 수동 생성 버튼으로 즉시 생성 가능합니다",(0,o.jsx)("br",{}),"• 생성된 요약은 언제든 수정할 수 있습니다"]})]})]})]}),(0,o.jsxs)(I.A,{sx:{p:3,borderRadius:2,border:"1px solid ".concat(e.palette.divider),bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.03)":"background.paper",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,o.jsx)(g.A,{variant:"h6",sx:{fontWeight:600,mb:2},children:"\uD83D\uDCA1 작성 팁"}),(0,o.jsxs)(b.A,{component:"ul",sx:{pl:2,m:0},children:[(0,o.jsx)(g.A,{component:"li",variant:"body2",color:"text.secondary",sx:{mb:1},children:"제목은 구체적이고 흥미롭게 작성하세요"}),(0,o.jsx)(g.A,{component:"li",variant:"body2",color:"text.secondary",sx:{mb:1},children:"AI 요약을 활용해 매력적인 서론을 만드세요"}),(0,o.jsx)(g.A,{component:"li",variant:"body2",color:"text.secondary",sx:{mb:1},children:"마크다운 툴바를 활용해 서식을 추가하세요"}),(0,o.jsx)(g.A,{component:"li",variant:"body2",color:"text.secondary",children:"미리보기로 최종 결과를 확인하세요"})]})]})]})})]})]}),(0,o.jsxs)(p.A,{open:te,onClose:tp,maxWidth:"sm",fullWidth:!0,children:[(0,o.jsx)(h.A,{children:"임시저장된 내용 발견"}),(0,o.jsxs)(m.A,{children:[(0,o.jsx)(g.A,{variant:"body1",sx:{mb:2},children:"이전에 작성하던 내용이 임시저장되어 있습니다. 복원하시겠습니까?"}),(0,o.jsx)(g.A,{variant:"body2",color:"text.secondary",children:"복원하지 않으면 임시저장된 내용은 삭제됩니다."})]}),(0,o.jsxs)(j.A,{children:[(0,o.jsx)(y.A,{onClick:tp,color:"inherit",children:"삭제하기"}),(0,o.jsx)(y.A,{onClick:tx,variant:"contained",autoFocus:!0,children:"복원하기"})]})]}),(0,o.jsx)(ej.A,{})]})}):(0,o.jsx)(ef.A,{children:(0,o.jsxs)(b.A,{sx:{minHeight:"100vh",bgcolor:"background.default"},children:[(0,o.jsx)(eA.A,{}),(0,o.jsx)(C.A,{maxWidth:"md",sx:{py:8},children:(0,o.jsxs)(b.A,{sx:{textAlign:"center"},children:[(0,o.jsx)(v.A,{sx:{fontSize:80,color:"primary.main",mb:2}}),(0,o.jsx)(g.A,{variant:"h4",gutterBottom:!0,children:"로그인이 필요합니다"}),(0,o.jsx)(g.A,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"블로그 글 작성은 관리자만 가능합니다."}),(0,o.jsx)(y.A,{variant:"contained",onClick:()=>eC(!0),startIcon:(0,o.jsx)(v.A,{}),children:"관리자 로그인"})]})}),(0,o.jsx)(ej.A,{}),(0,o.jsx)(k,{open:eS,onClose:()=>eC(!1),onSuccess:()=>{ek(!0),eI(u.u.getUser()),eC(!1)}})]})})}function ev(){return(0,o.jsx)(i.Suspense,{fallback:(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"로딩 중..."}),children:(0,o.jsx)(ey,{})})}},79323:(e,t,r)=>{"use strict";r.d(t,{u:()=>i});let o="blog_auth";class i{static isAuthenticated(){let e=localStorage.getItem(o);if(!e)return!1;try{let{timestamp:t}=JSON.parse(e);if(!(Date.now()-t<864e5))return this.logout(),!1;return!0}catch(e){return this.logout(),!1}}static async login(e){try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})}),r=await t.json();if(r.success){let e={timestamp:Date.now(),user:r.user,token:r.token};return localStorage.setItem(o,JSON.stringify(e)),!0}return!1}catch(e){return console.error("Login error:",e),!1}}static logout(){localStorage.removeItem(o)}static clearAllSessions(){localStorage.clear()}static getUser(){if(!this.isAuthenticated())return null;let e=localStorage.getItem(o);if(!e)return null;try{let{user:t}=JSON.parse(e);return t}catch(e){return null}}static getAuthHeaders(){let e=localStorage.getItem(o);if(!e)return console.log("[AUTH] No auth data in localStorage"),{};try{let{token:t}=JSON.parse(e);if(!t)return console.log("[AUTH] No token in auth data"),{};return console.log("[AUTH] Token available, length: ".concat(t.length)),{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}catch(e){return console.error("[AUTH] Error parsing auth data:",e),{}}}static debugAuthState(){let e=localStorage.getItem(o);if(!e)return{authenticated:!1,reason:"No auth data"};try{var t;let r=JSON.parse(e),o=Date.now(),i=o-r.timestamp>864e5;return{authenticated:this.isAuthenticated(),hasToken:!!r.token,tokenLength:(null==(t=r.token)?void 0:t.length)||0,timestamp:r.timestamp,age:o-r.timestamp,isExpired:i,user:r.user}}catch(e){return{authenticated:!1,reason:"Parse error",error:e instanceof Error?e.message:"Unknown error"}}}static async authenticatedFetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log("[AUTH] Making authenticated request to: ".concat(e)),!this.isAuthenticated())throw console.error("[AUTH] User not authenticated"),Error("Authentication required");let r=this.getAuthHeaders(),o="object"==typeof r&&r&&"Authorization"in r?r.Authorization:null;console.log("[AUTH] Authorization header: ".concat(o?"".concat(o.substring(0,15),"..."):"None"));let i={...r,...t.headers};return console.log("[AUTH] Request method: ".concat(t.method||"GET")),console.log("[AUTH] Final headers:",Object.keys(i)),fetch(e,{...t,headers:i})}}},83951:(e,t,r)=>{"use strict";r.d(t,{Gv:()=>n,Z_:()=>i,qr:()=>o});let o=["Tech Insights","Code Solutions","Study Journal"],i={"Tech Insights":"기술 트렌드와 인사이트를 공유합니다.","Code Solutions":"실무에서 마주하는 문제와 해결책을 다룹니다.","Study Journal":"학습 과정과 기록을 공유하는 일지입니다."},n={"Tech Insights":"linear-gradient(135deg, #B3E5FC, #81D4FA)","Code Solutions":"linear-gradient(135deg, #FFB5A7, #FCD29F)","Study Journal":"linear-gradient(135deg, #F8BBD9, #E2E2FD)"}}},e=>{var t=t=>e(e.s=t);e.O(0,[112,662,150,768,722,259,441,684,120],()=>t(39363)),_N_E=e.O()}]);