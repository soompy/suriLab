(()=>{var e={};e.id=294,e.ids=[294],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{},98495:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>d,routeModule:()=>u,serverHooks:()=>g,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>c});var s={};t.r(s),t.d(s,{POST:()=>l});var n=t(96559),a=t(48088),o=t(37719),i=t(32190);async function l(e){try{let{content:r}=await e.json();if(!r||r.trim().length<50)return i.NextResponse.json({error:"요약할 내용이 너무 짧습니다. 최소 50자 이상 입력해주세요."},{status:400});let t=function(e){let r=e.replace(/#{1,6}\s+/g,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/```[\s\S]*?```/g,"").replace(/!\[.*?\]\(.*?\)/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/>\s+/g,"").replace(/[-*+]\s+/g,"").replace(/\n+/g," ").replace(/\s+/g," ").trim();if(!r)return"내용을 입력하면 AI가 자동으로 요약을 생성합니다.";let t=r.split(/[.!?]+/).map(e=>e.trim()).filter(e=>e.length>15);if(0===t.length)return"요약할 수 있는 충분한 내용이 없습니다.";let s=r.toLowerCase().replace(/[^\w\s가-힣]/g," ").split(/\s+/).filter(e=>e.length>2),n={};s.forEach(e=>{n[e]=(n[e]||0)+1}),["그리고","그런데","하지만","그러나","또한","그래서","따라서","이것","저것","것이","것을","수가","있다","없다","한다","된다","이다","아니다","때문","경우","상황","방법","문제","결과","통해","위해","대해","관련","필요","가능","중요","다양","the","and","for","are","but","not","you","all","can","was","one","our"].forEach(e=>delete n[e]);let a=Object.entries(n).sort(([,e],[,r])=>r-e).slice(0,3).map(([e])=>e),o=t.map(e=>{let r=e.toLowerCase(),s=0;a.forEach(e=>{r.includes(e)&&(s+=2*(n[e]||0))});let o=t.indexOf(e);0===o?s+=5:o<.2*t.length&&(s+=3),["목적","목표","중심","핵심","주요","특징","장점","방법","해결","개발","구현","활용"].forEach(e=>{r.includes(e)&&(s+=3)});let i=e.length;return i>=40&&i<=120&&(s+=2),{sentence:e,score:s,index:o}}).sort((e,r)=>r.score-e.score).slice(0,1===t.length?1:2).sort((e,r)=>e.index-r.index).map(e=>e.sentence.trim()),i=o.join(". ");if(i&&!i.match(/[.!?]$/)&&(i+="."),i.length>100){let e=o[0];i=e&&e.length<=100?e:i.substring(0,97)+"..."}if(i.length<20){let e=t[0];e&&(i=e.length>100?e.substring(0,97)+"...":e)}return i||"내용을 더 입력해주시면 더 정확한 요약을 생성할 수 있습니다."}(r);return i.NextResponse.json({success:!0,summary:t,wordCount:r.split(" ").length,charCount:r.length})}catch(e){return console.error("Summarize error:",e),i.NextResponse.json({error:"요약 생성 중 오류가 발생했습니다."},{status:500})}}let u=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/ai/summarize/route",pathname:"/api/ai/summarize",filename:"route",bundlePath:"app/api/ai/summarize/route"},resolvedPagePath:"/Users/isoomin/Desktop/suriBlog/src/app/api/ai/summarize/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:p,workUnitAsyncStorage:c,serverHooks:g}=u;function d(){return(0,o.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:c})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,580],()=>t(98495));module.exports=s})();