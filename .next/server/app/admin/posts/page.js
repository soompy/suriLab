(()=>{var e={};e.id=358,e.ids=[358],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12269:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(23428),s=r(60687);let a=(0,o.A)((0,s.jsx)("path",{d:"M5 4v2h14V4zm0 10h4v6h6v-6h4l-7-7z"}),"Publish")},14711:(e,t,r)=>{Promise.resolve().then(r.bind(r,45883))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24735:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>p,routeModule:()=>u,tree:()=>d});var o=r(65239),s=r(48088),a=r(88170),i=r.n(a),n=r(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d={children:["",{children:["admin",{children:["posts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,58272)),"/Users/isoomin/Desktop/suriBlog/src/app/admin/posts/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/isoomin/Desktop/suriBlog/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,p=["/Users/isoomin/Desktop/suriBlog/src/app/admin/posts/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},u=new o.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/posts/page",pathname:"/admin/posts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},45883:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eb});var o=r(60687),s=r(43210),a=r(88931),i=r(89431),n=r(87088),l=r(16184),d=r(86706),p=r(51067),c=r(60997),u=r(49384),h=r(99282),x=r(13555),g=r(84754),m=r(4144),y=r(82816);function v(e){return(0,y.Ay)("MuiTableContainer",e)}(0,m.A)("MuiTableContainer",["root"]);let b=e=>{let{classes:t}=e;return(0,h.A)({root:["root"]},v,t)},A=(0,x.Ay)("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),f=s.forwardRef(function(e,t){let r=(0,g.b)({props:e,name:"MuiTableContainer"}),{className:s,component:a="div",...i}=r,n={...r,component:a},l=b(n);return(0,o.jsx)(A,{ref:t,as:a,className:(0,u.A)(l.root,s),ownerState:n,...i})}),j=s.createContext();var w=r(45258);function k(e){return(0,y.Ay)("MuiTable",e)}(0,m.A)("MuiTable",["root","stickyHeader"]);let C=e=>{let{classes:t,stickyHeader:r}=e;return(0,h.A)({root:["root",r&&"stickyHeader"]},k,t)},M=(0,x.Ay)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.stickyHeader&&t.stickyHeader]}})((0,w.A)(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:e})=>e.stickyHeader,style:{borderCollapse:"separate"}}]}))),T="table",P=s.forwardRef(function(e,t){let r=(0,g.b)({props:e,name:"MuiTable"}),{className:a,component:i=T,padding:n="normal",size:l="medium",stickyHeader:d=!1,...p}=r,c={...r,component:i,padding:n,size:l,stickyHeader:d},h=C(c),x=s.useMemo(()=>({padding:n,size:l,stickyHeader:d}),[n,l,d]);return(0,o.jsx)(j.Provider,{value:x,children:(0,o.jsx)(M,{as:i,role:i===T?null:"table",ref:t,className:(0,u.A)(h.root,a),ownerState:c,...p})})}),R=s.createContext();function z(e){return(0,y.Ay)("MuiTableHead",e)}(0,m.A)("MuiTableHead",["root"]);let S=e=>{let{classes:t}=e;return(0,h.A)({root:["root"]},z,t)},$=(0,x.Ay)("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),H={variant:"head"},_="thead",E=s.forwardRef(function(e,t){let r=(0,g.b)({props:e,name:"MuiTableHead"}),{className:s,component:a=_,...i}=r,n={...r,component:a},l=S(n);return(0,o.jsx)(R.Provider,{value:H,children:(0,o.jsx)($,{as:a,className:(0,u.A)(l.root,s),ref:t,role:a===_?null:"rowgroup",ownerState:n,...i})})});var B=r(2899);function D(e){return(0,y.Ay)("MuiTableRow",e)}let q=(0,m.A)("MuiTableRow",["root","selected","hover","head","footer"]),N=e=>{let{classes:t,selected:r,hover:o,head:s,footer:a}=e;return(0,h.A)({root:["root",r&&"selected",o&&"hover",s&&"head",a&&"footer"]},D,t)},O=(0,x.Ay)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.head&&t.head,r.footer&&t.footer]}})((0,w.A)(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${q.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${q.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,B.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,B.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}}))),U=s.forwardRef(function(e,t){let r=(0,g.b)({props:e,name:"MuiTableRow"}),{className:a,component:i="tr",hover:n=!1,selected:l=!1,...d}=r,p=s.useContext(R),c={...r,component:i,hover:n,selected:l,head:p&&"head"===p.variant,footer:p&&"footer"===p.variant},h=N(c);return(0,o.jsx)(O,{as:i,ref:t,className:(0,u.A)(h.root,a),role:"tr"===i?null:"row",ownerState:c,...d})});var W=r(61543);function L(e){return(0,y.Ay)("MuiTableCell",e)}let X=(0,m.A)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),G=e=>{let{classes:t,variant:r,align:o,padding:s,size:a,stickyHeader:i}=e,n={root:["root",r,i&&"stickyHeader","inherit"!==o&&`align${(0,W.A)(o)}`,"normal"!==s&&`padding${(0,W.A)(s)}`,`size${(0,W.A)(a)}`]};return(0,h.A)(n,L,t)},I=(0,x.Ay)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],t[`size${(0,W.A)(r.size)}`],"normal"!==r.padding&&t[`padding${(0,W.A)(r.padding)}`],"inherit"!==r.align&&t[`align${(0,W.A)(r.align)}`],r.stickyHeader&&t.stickyHeader]}})((0,w.A)(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${"light"===e.palette.mode?(0,B.a)((0,B.X4)(e.palette.divider,1),.88):(0,B.e$)((0,B.X4)(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${X.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:e})=>e.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),F=s.forwardRef(function(e,t){let r,a=(0,g.b)({props:e,name:"MuiTableCell"}),{align:i="inherit",className:n,component:l,padding:d,scope:p,size:c,sortDirection:h,variant:x,...m}=a,y=s.useContext(j),v=s.useContext(R),b=v&&"head"===v.variant,A=p;"td"===(r=l||(b?"th":"td"))?A=void 0:!A&&b&&(A="col");let f=x||v&&v.variant,w={...a,align:i,component:r,padding:d||(y&&y.padding?y.padding:"normal"),size:c||(y&&y.size?y.size:"medium"),sortDirection:h,stickyHeader:"head"===f&&y&&y.stickyHeader,variant:f},k=G(w),C=null;return h&&(C="asc"===h?"ascending":"descending"),(0,o.jsx)(I,{as:r,ref:t,className:(0,u.A)(k.root,n),"aria-sort":C,scope:A,ownerState:w,...m})});function J(e){return(0,y.Ay)("MuiTableBody",e)}(0,m.A)("MuiTableBody",["root"]);let K=e=>{let{classes:t}=e;return(0,h.A)({root:["root"]},J,t)},V=(0,x.Ay)("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),Q={variant:"body"},Y="tbody",Z=s.forwardRef(function(e,t){let r=(0,g.b)({props:e,name:"MuiTableBody"}),{className:s,component:a=Y,...i}=r,n={...r,component:a},l=K(n);return(0,o.jsx)(R.Provider,{value:Q,children:(0,o.jsx)(V,{className:(0,u.A)(l.root,s),as:a,ref:t,role:a===Y?null:"rowgroup",ownerState:n,...i})})});var ee=r(76533),et=r(25685),er=r(83685),eo=r(24886),es=r(37204),ea=r(24296),ei=r(90764),en=r(27674),el=r(23428);let ed=(0,el.A)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var ep=r(75396),ec=r(46380);let eu=(0,el.A)((0,o.jsx)("path",{d:"M21.19 21.19 2.81 2.81 1.39 4.22l2.27 2.27C2.61 8.07 2 9.96 2 12c0 5.52 4.48 10 10 10 2.04 0 3.93-.61 5.51-1.66l2.27 2.27zm-10.6-4.59-4.24-4.24 1.41-1.41 2.83 2.83.18-.18 1.41 1.41zm3-5.84-7.1-7.1C8.07 2.61 9.96 2 12 2c5.52 0 10 4.48 10 10 0 2.04-.61 3.93-1.66 5.51L15 12.17l2.65-2.65-1.41-1.41z"}),"Unpublished");var eh=r(12269),ex=r(43323),eg=r(16189),em=r(59429),ey=r(21891),ev=r(51317);function eb(){let e=(0,eg.useRouter)(),[t,r]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[x,g]=(0,s.useState)(null),[m,y]=(0,s.useState)({open:!1,post:null}),[v,b]=(0,s.useState)(1),[A,j]=(0,s.useState)(1),[w,k]=(0,s.useState)(""),C=async()=>{try{h(!0);let e=new URLSearchParams({page:v.toString(),limit:"10",isPublished:"",search:w}),t=await fetch(`/api/posts?${e.toString()}`);if(!t.ok)throw Error("Failed to fetch posts");let o=await t.json();r(o.posts),j(o.totalPages)}catch(e){g(e instanceof Error?e.message:"An error occurred")}finally{h(!1)}},M=async e=>{try{if(!(await fetch(`/api/posts/${e.id}`,{method:"DELETE"})).ok)throw Error("Failed to delete post");await C(),y({open:!1,post:null}),alert("포스트가 삭제되었습니다.")}catch(e){console.error("Error deleting post:",e),alert("포스트 삭제에 실패했습니다.")}},T=async e=>{try{if(!(await fetch(`/api/posts/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isPublished:!e.isPublished})})).ok)throw Error("Failed to update post");await C(),alert(`포스트가 ${!e.isPublished?"공개":"비공개"}되었습니다.`)}catch(e){console.error("Error updating post:",e),alert("포스트 상태 변경에 실패했습니다.")}},R=e=>{window.open(`/posts/${e.slug}`,"_blank")},z=t=>{e.push(`/admin/posts/edit/${t.id}`)},S=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return u?(0,o.jsx)(em.A,{children:(0,o.jsxs)(a.A,{sx:{minHeight:"100vh",bgcolor:"background.default"},children:[(0,o.jsx)(ey.A,{}),(0,o.jsx)(i.A,{maxWidth:"lg",sx:{py:4},children:(0,o.jsx)(n.A,{children:"로딩 중..."})}),(0,o.jsx)(ev.A,{})]})}):(0,o.jsx)(em.A,{children:(0,o.jsxs)(a.A,{sx:{minHeight:"100vh",bgcolor:"background.default"},children:[(0,o.jsx)(ey.A,{}),(0,o.jsxs)(i.A,{maxWidth:"lg",sx:{py:4},children:[(0,o.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[(0,o.jsx)(n.A,{variant:"h4",component:"h1",children:"포스트 관리"}),(0,o.jsx)(l.A,{variant:"contained",startIcon:(0,o.jsx)(ed,{}),onClick:()=>e.push("/write"),children:"새 포스트 작성"})]}),x&&(0,o.jsx)(d.A,{severity:"error",sx:{mb:3},children:x}),(0,o.jsx)(p.A,{sx:{mb:3},children:(0,o.jsx)(a.A,{sx:{p:2},children:(0,o.jsx)(c.A,{fullWidth:!0,placeholder:"제목, 내용으로 검색...",value:w,onChange:e=>k(e.target.value),variant:"outlined",size:"small"})})}),(0,o.jsx)(f,{component:p.A,children:(0,o.jsxs)(P,{children:[(0,o.jsx)(E,{children:(0,o.jsxs)(U,{children:[(0,o.jsx)(F,{children:"제목"}),(0,o.jsx)(F,{children:"상태"}),(0,o.jsx)(F,{children:"카테고리"}),(0,o.jsx)(F,{children:"조회수"}),(0,o.jsx)(F,{children:"작성일"}),(0,o.jsx)(F,{children:"수정일"}),(0,o.jsx)(F,{children:"작업"})]})}),(0,o.jsx)(Z,{children:t.map(e=>(0,o.jsxs)(U,{children:[(0,o.jsx)(F,{children:(0,o.jsxs)(a.A,{children:[(0,o.jsx)(n.A,{variant:"subtitle2",noWrap:!0,children:e.title}),(0,o.jsx)(n.A,{variant:"caption",color:"text.secondary",noWrap:!0,children:e.excerpt}),e.featured&&(0,o.jsx)(ee.A,{label:"추천",size:"small",color:"secondary",sx:{ml:1}})]})}),(0,o.jsx)(F,{children:(0,o.jsx)(ee.A,{label:e.isPublished?"공개":"비공개",color:e.isPublished?"success":"default",size:"small"})}),(0,o.jsx)(F,{children:e.category}),(0,o.jsx)(F,{children:e.views?.toLocaleString()||0}),(0,o.jsx)(F,{children:S(e.publishedAt)}),(0,o.jsx)(F,{children:S(e.updatedAt)}),(0,o.jsx)(F,{children:(0,o.jsxs)(et.A,{direction:"row",spacing:1,children:[(0,o.jsx)(er.A,{size:"small",onClick:()=>R(e),title:"보기",children:(0,o.jsx)(ep.A,{})}),(0,o.jsx)(er.A,{size:"small",onClick:()=>z(e),title:"편집",children:(0,o.jsx)(ec.A,{})}),(0,o.jsx)(er.A,{size:"small",onClick:()=>T(e),title:e.isPublished?"비공개로 변경":"공개로 변경",children:e.isPublished?(0,o.jsx)(eu,{}):(0,o.jsx)(eh.A,{})}),(0,o.jsx)(er.A,{size:"small",color:"error",onClick:()=>y({open:!0,post:e}),title:"삭제",children:(0,o.jsx)(ex.A,{})})]})})]},e.id))})]})}),A>1&&(0,o.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",mt:3},children:(0,o.jsx)(eo.A,{count:A,page:v,onChange:(e,t)=>b(t),color:"primary"})}),(0,o.jsxs)(es.A,{open:m.open,onClose:()=>y({open:!1,post:null}),children:[(0,o.jsx)(ea.A,{children:"포스트 삭제"}),(0,o.jsx)(ei.A,{children:(0,o.jsxs)(n.A,{children:['"',m.post?.title,'" 포스트를 정말 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.']})}),(0,o.jsxs)(en.A,{children:[(0,o.jsx)(l.A,{onClick:()=>y({open:!1,post:null}),children:"취소"}),(0,o.jsx)(l.A,{color:"error",onClick:()=>m.post&&M(m.post),children:"삭제"})]})]})]}),(0,o.jsx)(ev.A,{})]})})}},58272:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/isoomin/Desktop/suriBlog/src/app/admin/posts/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/isoomin/Desktop/suriBlog/src/app/admin/posts/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77759:(e,t,r)=>{Promise.resolve().then(r.bind(r,58272))}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[447,347,573,202,886,851],()=>r(24735));module.exports=o})();